return function(config)
	config = config or {}
	local Name = config.Name or "DNgg Hub"
	local Accent = config.AccentColor or Color3.fromRGB(0,170,255)

	local P = game:GetService("Players").LocalPlayer
	local Gui = Instance.new("ScreenGui", P:WaitForChild("PlayerGui"))
	Gui.Name = Name:gsub(" ","").."_UI"
	Gui.ResetOnSpawn = false

	local Main = Instance.new("Frame", Gui)
	Main.Size = UDim2.new(0,310,0,260)
	Main.Position = UDim2.new(0.35,0,0.35,0)
	Main.BackgroundColor3 = Color3.fromRGB(25,25,35)
	Main.BorderSizePixel = 0
	Main.Active = true
	Main.Draggable = true

	local Top = Instance.new("Frame", Main)
	Top.Size = UDim2.new(1,0,0,30)
	Top.BackgroundColor3 = Accent
	Top.BorderSizePixel = 0

	local Title = Instance.new("TextLabel", Top)
	Title.Size = UDim2.new(1,-60,1,0)
	Title.Position = UDim2.new(0,10,0,0)
	Title.BackgroundTransparency = 1
	Title.Text = Name
	Title.TextColor3 = Color3.new(1,1,1)
	Title.TextXAlignment = Enum.TextXAlignment.Left
	Title.Font = Enum.Font.SourceSansBold
	Title.TextSize = 16

	local MinBtn = Instance.new("TextButton", Top)
	MinBtn.Size = UDim2.new(0,25,1,0)
	MinBtn.Position = UDim2.new(1,-50,0,0)
	MinBtn.Text = "-"
	MinBtn.BackgroundColor3 = Color3.fromRGB(40,40,50)
	MinBtn.TextColor3 = Color3.new(1,1,1)
	MinBtn.Font = Enum.Font.SourceSansBold
	MinBtn.TextSize = 18

	local CloseBtn = Instance.new("TextButton", Top)
	CloseBtn.Size = UDim2.new(0,25,1,0)
	CloseBtn.Position = UDim2.new(1,-25,0,0)
	CloseBtn.Text = "X"
	CloseBtn.BackgroundColor3 = Color3.fromRGB(150,40,40)
	CloseBtn.TextColor3 = Color3.new(1,1,1)
	CloseBtn.Font = Enum.Font.SourceSansBold
	CloseBtn.TextSize = 16

	local TabBar = Instance.new("Frame", Main)
	TabBar.Size = UDim2.new(1,0,0,25)
	TabBar.Position = UDim2.new(0,0,0,30)
	TabBar.BackgroundColor3 = Color3.fromRGB(35,35,50)

	local Content = Instance.new("Frame", Main)
	Content.Size = UDim2.new(1,-10,1,-65)
	Content.Position = UDim2.new(0,5,0,60)
	Content.BackgroundTransparency = 1
	Content.ClipsDescendants = true

	local UIList = Instance.new("UIListLayout", Content)
	UIList.Padding = UDim.new(0,4)
	UIList.SortOrder = Enum.SortOrder.LayoutOrder

	local Tabs, ActiveTab, Elements = {}, nil, {}

	local function switchTab(tab)
		for _,t in pairs(Tabs) do t.frame.Visible = false end
		tab.frame.Visible = true
		ActiveTab = tab
	end

	local UI = {}

	function UI:CreateTab(name)
		local btn = Instance.new("TextButton", TabBar)
		btn.Size = UDim2.new(0,100,1,0)
		btn.Text = name
		btn.BackgroundColor3 = Color3.fromRGB(45,45,65)
		btn.TextColor3 = Color3.new(1,1,1)
		btn.Font = Enum.Font.SourceSans
		btn.TextSize = 14

		local frame = Instance.new("Frame", Content)
		frame.Size = UDim2.new(1,0,1,0)
		frame.Visible = false
		local layout = Instance.new("UIListLayout", frame)
		layout.Padding = UDim.new(0,4)

		local tab = {frame=frame,name=name}
		Tabs[#Tabs+1] = tab
		btn.MouseButton1Click:Connect(function() switchTab(tab) end)
		if not ActiveTab then switchTab(tab) end

		function tab:AddLabel(text)
			local l = Instance.new("TextLabel", frame)
			l.Size = UDim2.new(1,0,0,20)
			l.BackgroundTransparency = 1
			l.Text = text
			l.TextColor3 = Color3.new(1,1,1)
			l.Font = Enum.Font.SourceSans
			l.TextSize = 14
		end

		function tab:AddToggle(name, state, desc, callback)
			local f = Instance.new("Frame", frame)
			f.Size = UDim2.new(1,0,0,25)
			f.BackgroundTransparency = 1
			local lbl = Instance.new("TextLabel", f)
			lbl.Size = UDim2.new(0.7,0,1,0)
			lbl.BackgroundTransparency = 1
			lbl.Text = name
			lbl.TextColor3 = Color3.new(1,1,1)
			lbl.TextXAlignment = Enum.TextXAlignment.Left
			lbl.Font = Enum.Font.SourceSans
			lbl.TextSize = 14

			local b = Instance.new("TextButton", f)
			b.Size = UDim2.new(0.25,0,1,0)
			b.Position = UDim2.new(0.75,0,0,0)
			b.BackgroundColor3 = state and Accent or Color3.fromRGB(70,70,70)
			b.Text = state and "ON" or "OFF"
			b.TextColor3 = Color3.new(1,1,1)
			b.Font = Enum.Font.SourceSansBold
			b.TextSize = 14
			b.MouseButton1Click:Connect(function()
				state = not state
				b.BackgroundColor3 = state and Accent or Color3.fromRGB(70,70,70)
				b.Text = state and "ON" or "OFF"
				pcall(callback,state)
			end)
			Elements[name] = {type="toggle",obj=b,set=function(v)
				state=v
				b.BackgroundColor3 = v and Accent or Color3.fromRGB(70,70,70)
				b.Text = v and "ON" or "OFF"
			end}
		end

		function tab:AddButton(name, desc, callback)
			local b = Instance.new("TextButton", frame)
			b.Size = UDim2.new(1,0,0,25)
			b.Text = name
			b.BackgroundColor3 = Accent
			b.TextColor3 = Color3.new(1,1,1)
			b.Font = Enum.Font.SourceSansBold
			b.TextSize = 14
			b.MouseButton1Click:Connect(function() pcall(callback) end)
			Elements[name] = {type="button",obj=b}
		end

		function tab:AddTextbox(name, default, desc, callback)
			local f = Instance.new("Frame", frame)
			f.Size = UDim2.new(1,0,0,25)
			f.BackgroundTransparency = 1
			local lbl = Instance.new("TextLabel", f)
			lbl.Size = UDim2.new(0.5,0,1,0)
			lbl.BackgroundTransparency = 1
			lbl.Text = name
			lbl.TextColor3 = Color3.new(1,1,1)
			lbl.TextXAlignment = Enum.TextXAlignment.Left
			lbl.Font = Enum.Font.SourceSans
			lbl.TextSize = 14
			local box = Instance.new("TextBox", f)
			box.Size = UDim2.new(0.45,0,1,0)
			box.Position = UDim2.new(0.55,0,0,0)
			box.Text = tostring(default or "")
			box.BackgroundColor3 = Color3.fromRGB(40,40,55)
			box.TextColor3 = Color3.new(1,1,1)
			box.Font = Enum.Font.SourceSans
			box.TextSize = 14
			box.FocusLost:Connect(function() pcall(callback, box.Text) end)
			Elements[name] = {type="textbox",obj=box,set=function(v) box.Text=tostring(v) end}
		end

		function tab:AddSlider(name, default, min, max, desc, callback)
			local f = Instance.new("Frame", frame)
			f.Size = UDim2.new(1,0,0,25)
			f.BackgroundTransparency = 1
			local lbl = Instance.new("TextLabel", f)
			lbl.Size = UDim2.new(0.5,0,1,0)
			lbl.BackgroundTransparency = 1
			lbl.Text = name
			lbl.TextColor3 = Color3.new(1,1,1)
			lbl.TextXAlignment = Enum.TextXAlignment.Left
			lbl.Font = Enum.Font.SourceSans
			lbl.TextSize = 14
			local slide = Instance.new("TextBox", f)
			slide.Size = UDim2.new(0.45,0,1,0)
			slide.Position = UDim2.new(0.55,0,0,0)
			slide.BackgroundColor3 = Color3.fromRGB(40,40,55)
			slide.TextColor3 = Color3.new(1,1,1)
			slide.Font = Enum.Font.SourceSans
			slide.TextSize = 14
			slide.Text = tostring(default or min)
			slide.FocusLost:Connect(function()
				local val = tonumber(slide.Text)
				if val then val = math.clamp(val,min,max) slide.Text=tostring(val) pcall(callback,val) end
			end)
			Elements[name]={type="slider",obj=slide,set=function(v) slide.Text=tostring(v) end}
		end

		return tab
	end

	function UI:Change(name,value)
		local el = Elements[name]
		if el and el.set then el.set(value) end
	end

	MinBtn.MouseButton1Click:Connect(function()
		Content.Visible = not Content.Visible
		Main.Size = Content.Visible and UDim2.new(0,310,0,260) or UDim2.new(0,310,0,55)
	end)
	CloseBtn.MouseButton1Click:Connect(function() Gui:Destroy() end)

	return UI
end
